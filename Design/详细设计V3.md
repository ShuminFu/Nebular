### 概念解释

- Opera系统中的Bot：是一个可以被邀请成为Staff的实体

- BotManager系统中的Bot：是我们要管理的AI助手实体

# 核心层

## Agent模板管理

### 模板定义：
#### Prompt配置：系统提示词、角色设定等
#### LLM配置：模型选择、参数配置(temperature等)
#### 框架类型：Autogen/Aider/CrewAI
#### 能力配置：注册的能力列表

### 核心功能：
#### 创建模板
#### 更新模板
#### 删除模板
#### 查询模板

## Agent实例管理
### 实例生命周期管理：
#### 创建Agent实例
#### 启动/停止Agent
#### 监控Agent状态
#### 销毁Agent实例

## 能力注册和管理
### 基础能力：
#### 对话能力
#### 文件处理
#### 工具调用
### 能力注册机制：
#### 能力接口定义
#### 能力注册/注销
#### 能力依赖管理


#  适配层

## 框架适配器（Autogen/Aider/CrewAI）
### AutoGen适配：
#### Agent配置转换
#### 消息流转适配
#### 多Agent协作支持

## Opera接口适配
### SignalR消息适配：
#### 消息订阅
#### 消息发送
#### 连接管理

### WebAPI适配：
#### Bot注册
#### Staff管理
#### 资源访问



## 状态同步机制
### Agent状态同步：
#### 在线状态
#### 运行状态
#### 错误状态

# 集成层

## Opera连接管理
### 连接生命周期：
#### 建立连接
#### 保持心跳
#### 重连机制
#### 关闭连接

## 事件处理
### 核心事件：
#### Staff邀请
#### 消息接收
#### 系统通知
## 状态回报
### 状态上报：
#### Agent健康状态
#### 处理能力状态
#### 资源使用状态
